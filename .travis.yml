language: python
services:
  - docker
python:
  - '3.6'
  - '3.7'
  - '3.8'
before_install:
  - docker pull wgxli/simplefhe-build
  - docker run -it -d --name build wgxli/simplefhe-build bash
  - docker exec -w / build git clone https://github.com/wgxli/simple-fhe.git
install:
  - docker exec build pip3 install coveralls coverage
script:
  - docker exec -w /simple-fhe build coverage run --branch -m unittest discover tests
after_success:
  - docker exec -e TRAVIS_JOB_ID="$TRAVIS_JOB_ID" -e TRAVIS_BRANCH="$TRAVIS_BRANCH" -w /simple-fhe build coveralls
